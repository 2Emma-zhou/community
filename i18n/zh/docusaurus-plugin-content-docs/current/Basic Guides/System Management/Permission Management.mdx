---
hide_title: true
sidebar_label: 权限管理
---


## 用户权限管理

1. 登录平台后，选择 **系统管理** > **用户管理**。
2. 单击右上角的 **角色权限**，然后点击 **新建角色**。
3. 输入角色名称，为该角色选择对应的权限。

<img width={450} src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/80-1.png" />

4. 单击 **保存**。

## Keycloak 权限管理
:::note
本演示仅聚焦于角色与权限的关联配置，Keycloak 支持更多功能，详情可参考 [Keycloak 官方文档](https://www.keycloak.org/guides#getting-started)。
:::

### 新增角色
1. 选择 **系统管理** > **身份与访问管理**，输入账号密码（admin/supos）登录 Keycloak。
2. 选择 **supos** 作为领域（realm）。

<img src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/20.png" />

3. 选择 **客户端（Clients）**，然后单击 **supos**。
4. 在 **角色（Roles）** 菜单下，点击 **创建角色（Create role）** 新增角色。

<img width={350} src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/21.png" />

5. 单击 **保存（Save）**。

### 分配权限
为不同角色分配权限，需先定义待访问的资源（resource），设置访问规则（policy）与访问主体，最后配置权限关联。

#### 新增资源（Resource）
1. 在客户端详情页，选择 **授权（Authorization）**。
2. 选择 **资源（Resources）**，然后点击 **创建资源（Create resource）**。

<img src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/22.png" />

3. 填写必填字段，添加资源路径（URIs）。
4. 单击 **保存（Save）**。

#### 设置策略（Policy）
1. 在客户端详情页，选择 **授权（Authorization）**。
2. 选择 **策略（Policies）**，然后点击 **创建客户端策略（Create client policy）**。
3. 设置 **策略类型（policy type）** 为 **角色（Role）**。

<img src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/23.png" />

4. 填写必填字段，选择需要授予访问权限的角色。
:::info
例如选择角色 A，则仅被分配角色 A 的用户可访问该权限关联的资源。
:::

<img src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/24.png" />

5. 单击 **保存（Save）**。

#### 配置权限（Permission）
1. 在客户端详情页，选择 **授权（Authorization）**。
2. 选择 **权限（Permissions）** > **创建权限（Create permission）** > **创建基于资源的权限（Create resource-based permission）**。
3. 填写必填字段，选择关联的资源（resource）与策略（policy）。

<img src="http://communityimage2.oss-cn-hangzhou.aliyuncs.com/25.png" />

4. 单击 **保存（Save）**。